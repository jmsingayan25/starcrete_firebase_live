<!DOCTYPE html>
<html>
<head>
	<title></title>

	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-app.js"></script>

	<!-- Add additional services you want to use -->
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-auth.js"></script>
	<script src="https://www.gstatic.com/firebasejs/5.0.1/firebase-database.js"></script>
	<script src="js_config/firebase_config.js"></script>
	<script src="js_config/function.js"></script>

	<!-- javascripts -->
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/css/bootstrap.min.css" integrity="sha384-Smlep5jCw/wG7hdkwQ/Z5nLIefveQRIY9nfy6xoR1uRYBtpZgI6339F5dgvm/e9B" crossorigin="anonymous">
	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.2/js/bootstrap.min.js" integrity="sha384-o+RDsa0aLu++PJvFqy8fFScvbHFLtbvScb8AjopnFD+iEQ7wo/CG0xlczd+2O/em" crossorigin="anonymous"></script>
    <script src="js/jquery.js"></script>
    <script src="js/jquery-ui-1.10.4.min.js"></script>
    <!-- <script src="js/jquery-1.8.3.min.js"></script> -->
    <script type="text/javascript" src="js/jquery-ui-1.9.2.custom.min.js"></script>
    <script type="text/javascript" src="https://code.jquery.com/jquery-1.11.3.min.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/jquery/latest/jquery.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/momentjs/latest/moment.min.js"></script>
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.min.js"></script>
	<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/daterangepicker/daterangepicker.css" />
	<link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.1/css/bootstrap.css">
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.19/css/dataTables.bootstrap4.min.css">

	
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.9/js/jquery.dataTables.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/responsive/1.0.7/js/dataTables.responsive.min.js"></script>
	<script type="text/javascript" src="https://cdn.datatables.net/1.10.19/js/dataTables.bootstrap4.min.js"></script>
	<!-- <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.9/css/jquery.dataTables.min.css"> -->
	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/1.0.7/css/responsive.dataTables.min.css">

    <link rel="stylesheet" type="text/css" href="css/style.css">

    <!-- <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script> -->
<script>
	
	var fromDate = "";
	var endDate = "";

   

	$(document).ready(function(){



		var itemData = {
			item: "HOWO",
		// 	item: "1B",
		// 	item: "1C",
		// 	item: "1X",
		// 	item: "1XX",
		// 	item: "2A",
		// 	item: "2B",
		// 	item: "2C",
		// 	item: "2X",
		// 	item: "2XX",
		// 	item: "3A",
		// 	item: "3B",
		// 	item: "3C",
		// 	item: "3X",
		// 	item: "3XX",
		// 	item: "5A",
		// 	item: "5B",
		// 	item: "5C",
		// 	item: "5X",
		// 	item: "5XX",
		// 	item: "BB",
		// 	item: "LC",
		// 	item: "NS",
		// 	item: "SE"
		// 	// quantity: "0"
		}

		if(firebase.database().ref('trucking_list/Bravo').push(itemData)){
			alert("YES");
		}
	
		// countItemOngoingDelivery('-LG3JVlx2c3FrmjfamQz', function(response){
		// 	if(response == null){
		// 		result = "EXIST";
		// 	}else{
		// 		result = "NOT EXIST";
		// 	}
		// console.log(result);
		// // return result;

		// });

		// $('input[name="daterange"]').daterangepicker({
		// 	opens: 'left'
		// }, function(start, end, label) {
		// 	fromDate = start.format('YYYY-MM-DD');
		// 	endDate = end.format('YYYY-MM-DD');
		// 	// console.log("A new date selection was made: " + start.format('YYYY-MM-DD') + ' to ' + end.format('YYYY-MM-DD'));
		// });
		// tableData('Bravo');
	});

    // function updateDiv()
    // { 
    //     $( "#orderList" ).load(window.location.href + " #orderList" );
    // }

	// function submitForm(){

	// 	event.preventDefault();

	// 	var myTbody = "";
 //        var count = 1;
 //        plant = 'Bravo';
 //        var table = $('#myTable').DataTable();
 //        // var fromDate = document.getElementById('start_date').value;
 //        // var endDate = document.getElementById('end_date').value;
 //        var search_text = document.getElementById('search').value;
 //        table.clear().draw();

 //        if(fromDate == '' && endDate == ''){

 //            firebase.database().ref('delivery_delivered_order').orderByChild('reverseDate').on('child_added', function(orderSnapshot){

 //                if(orderSnapshot.val().delivered_plant == plant){

 //                    firebase.database().ref('delivery_delivered_order/'+orderSnapshot.key+'/project_detail').once('value', function(projectSnapshot){
 //                        projectSnapshot.forEach(function(projectChildSnapshot){

 //                            text_dr_no = orderSnapshot.val().dr_no.toLowerCase();
 //                            text_po_no = orderSnapshot.val().po_no.toLowerCase();
 //                            text_item_no = orderSnapshot.val().item_no.toLowerCase();
 //                            text_project_name = projectChildSnapshot.val().project_name.toLowerCase();
 //                            text_project_address = projectChildSnapshot.val().project_address.toLowerCase();

 //                            all_text = text_dr_no + " " + text_po_no + " " + text_item_no + " " + text_project_name + " " + text_project_address;

 //                            search = searchMatch(search_text, all_text);

 //                            if(search != null){

 //                                dr_no = orderSnapshot.val().dr_no;
 //                                po_no = orderSnapshot.val().po_no;
 //                                item_no = orderSnapshot.val().item_no;
 //                                psi = orderSnapshot.val().psi;

 //                                if(psi != ""){
 //                                    psi_ext = " (" + psi + " psi)";
 //                                }else{
 //                                    psi_ext = "";
 //                                }

 //                                quantity = Number(orderSnapshot.val().quantity).toLocaleString('en');
 //                                project_name = projectChildSnapshot.val().project_name;
 //                                project_address = projectChildSnapshot.val().project_address;
 //                                date = dateFormat(orderSnapshot.val().date);
 //                                status = orderSnapshot.val().status;

 //                                myTbody += "<tr><td><strong>" + count + "</strong></td>";
 //                                myTbody += "<td><strong>" + dr_no + "</strong></td>";
 //                                myTbody += "<td style='cursor: pointer;'><div class='tooltips' data-original-title='Click for more details about P.O. No. " + po_no + "' data-placement='top' onclick=\"window.location='delivery_po_summary.html?po_no_key=" + orderSnapshot.val().po_no_key + "&plant=" + plant + "'\"><strong>" + po_no + "</strong></div></td>";
 //                                myTbody += "<td><strong>" + item_no + psi_ext + "</strong></td>";
 //                                myTbody += "<td><strong>" + quantity + " pcs</strong></td>";
 //                                myTbody += "<td><strong>" + project_name + "</strong></td>";
 //                                myTbody += "<td><strong>" + project_address + "</strong></td>";
 //                                myTbody += "<td><a data-toggle='collapse' data-target='#contacts"+count+"' style='cursor: default; color: inherit;'>Click to view</a><div id='contacts"+count+"' class='collapse'>";

 //                                firebase.database().ref('delivery_delivered_order/'+orderSnapshot.key+'/contact').once('value', function(contactSnapshot){
 //                                    contactSnapshot.forEach(function(contactChildSnapshot){

 //                                        contact_name = contactChildSnapshot.val().contact_name;
 //                                        contact_no = contactChildSnapshot.val().contact_no;
 //                                        myTbody += "<div class='row' style='margin-bottom: 2px;'><div class='col-md-12'><strong>" + contact_name + "<br> (" + contact_no + ") <br><br></strong></div></div>";
 //                                    }); 
 //                                });

 //                                myTbody += "</td>";
 //                                myTbody += "<td><strong>" + date + "</strong></td>";
 //                                myTbody += "<td><span class='label' style='background-color: #388e3c; font-size: 12px;'><strong>" + status + "</strong></span></td></tr>";
 //                                // myTbody += "<td style='color: #388e3c;'><strong>" + status + "</strong></td></tr>";

 //                                table.row.add( [ count, dr_no, po_no, item_no, quantity, project_name, project_address, project_address, date, status ] ).draw();
                                
 //                                count++;
 //                            }
 //                        });
 //                    });
 //                }
 //            });
 //        }else{

 //            if(fromDate == ''){
 //                newFromDate = new Date().toLocaleDateString('en');
 //                fromDate = new Date(newFromDate);
 //            }else{
 //                newFromDate = new Date(fromDate).toLocaleDateString('en');
 //                fromDate = new Date(newFromDate);
 //            }

 //            if(endDate == ''){
 //                newEndDate = new Date().toLocaleDateString('en');
 //                endDate = new Date(newEndDate);
 //            }else{
 //                newEndDate = new Date(endDate).toLocaleDateString('en');
 //                endDate = new Date(newEndDate);
 //            }

 //            firebase.database().ref('delivery_delivered_order').orderByChild('reverseDate').on('child_added', function(orderSnapshot){

 //                orderDate = new Date(orderSnapshot.val().date);

 //                if(orderDate.getTime() >= fromDate.getTime() && orderDate.getTime() <= endDate.getTime()){

 //                    if(orderSnapshot.val().delivered_plant == plant){

 //                        firebase.database().ref('delivery_delivered_order/'+orderSnapshot.key+'/project_detail').once('value', function(projectSnapshot){
 //                            projectSnapshot.forEach(function(projectChildSnapshot){

 //                                text_po_no = orderSnapshot.val().po_no.toLowerCase();
 //                                text_dr_no = orderSnapshot.val().dr_no.toLowerCase();
 //                                text_item_no = orderSnapshot.val().item_no.toLowerCase();
 //                                text_project_name = projectChildSnapshot.val().project_name.toLowerCase();
 //                                text_project_address = projectChildSnapshot.val().project_address.toLowerCase();

 //                                all_text = text_po_no + " " + text_dr_no + " " + text_item_no + " " + text_project_name + " " + text_project_address;

 //                                search = searchMatch(search_text, all_text);

 //                                if(search != null){

 //                                    dr_no = orderSnapshot.val().dr_no;
 //                                    po_no = orderSnapshot.val().po_no;
 //                                    item_no = orderSnapshot.val().item_no;
 //                                    psi = orderSnapshot.val().psi;

 //                                    if(psi != ""){
 //                                        psi_ext = " (" + psi + " psi)";
 //                                    }else{
 //                                        psi_ext = "";
 //                                    }

 //                                    quantity = Number(orderSnapshot.val().quantity).toLocaleString('en');
 //                                    project_name = projectChildSnapshot.val().project_name;
 //                                    project_address = projectChildSnapshot.val().project_address;
 //                                    date = dateFormat(orderSnapshot.val().date);
 //                                    status = orderSnapshot.val().status;

 //                                    myTbody += "<tr><td><strong>" + count + "</strong></td>";
 //                                    myTbody += "<td><strong>" + dr_no + "</strong></td>";
 //                                    myTbody += "<td style='cursor: pointer;'><div class='tooltips' data-original-title='Click for more details about P.O. No. " + po_no + "' data-placement='top' onclick=\"window.location='delivery_po_summary.html?po_no_key=" + orderSnapshot.val().po_no_key + "&plant=" + plant + "'\"><strong>" + po_no + "</strong></div></td>";
 //                                    myTbody += "<td><strong>" + item_no + psi_ext + "</strong></td>";
 //                                    myTbody += "<td><strong>" + quantity + " pcs</strong></td>";
 //                                    myTbody += "<td><strong>" + project_name + "</strong></td>";
 //                                    myTbody += "<td><strong>" + project_address + "</strong></td>";
 //                                    myTbody += "<td><a data-toggle='collapse' data-target='#contacts"+count+"' style='cursor: default; color: inherit;'>Click to view</a><div id='contacts"+count+"' class='collapse'>";

 //                                    firebase.database().ref('delivery_delivered_order/'+orderSnapshot.key+'/contact').once('value', function(contactSnapshot){
 //                                        contactSnapshot.forEach(function(contactChildSnapshot){

 //                                            contact_name = contactChildSnapshot.val().contact_name;
 //                                            contact_no = contactChildSnapshot.val().contact_no;
 //                                            myTbody += "<div class='row' style='margin-bottom: 2px;'><div class='col-md-12'><strong>" + contact_name + "<br> (" + contact_no + ") <br><br></strong></div></div>";
 //                                        }); 
 //                                    });

 //                                    myTbody += "</td>";
 //                                    myTbody += "<td><strong>" + date + "</strong></td>";
 //                                    myTbody += "<td><span class='label' style='background-color: #388e3c; font-size: 12px;'><strong>" + status + "</strong></span></td></tr>";
 //                                    // myTbody += "<td style='color: #388e3c;'><strong>" + status + "</strong></td></tr>";

 //                                    table.row.add( [ count, dr_no, po_no, item_no, quantity, project_name, project_address, ['john', 'josh'], date, status ] ).draw();
                                    
 //                                    count++;
 //                                }
 //                            });
 //                        });
 //                    }
 //                }
 //            });
 //        }

        // if(myTbody == ""){

        //     myTbody = "<tr><td colspan='10' style='height: 100%; background: white; text-align:center; vertical-align:middle;'><h4><p class='text-muted'>No data found</p></h4></td></tr>";

        //     document.getElementById('printPo').style.display = 'none';
        //     document.getElementById("orderList").innerHTML = myTbody;

        //     $(".se-pre-con").fadeOut("slow");

        // }else{

        //     document.getElementById('printPo').style.display = 'inline';
        //     document.getElementById("orderList").innerHTML = myTbody;

        //     $(function(){ $(".tooltips").tooltip(); });
        //     $(".se-pre-con").fadeOut("slow");

        // }

	//}

	// function tableData(plant){
 
       
 //        var myTbody = "";
 //    	var count = 1;
 //    	var table = $('#myTable').DataTable();
 //    	table.clear().draw();

 //        firebase.database().ref('delivery_ongoing_order').orderByChild('issued_dr_plant').equalTo(plant).once('value').then(function(drSnapshot){
 //            // console.log(drSnapshot.val());
 //            if(drSnapshot.val() == null){

 //                // myTbody = "<tr><td colspan='10' style='height: 100%; background: white; text-align:center; vertical-align:middle;'><h4><p class='text-muted'>No data found</p></h4></td></tr>";

 //                // document.getElementById("orderList").innerHTML = myTbody;

 //                table.draw( {
 //                    "language": {
 //                      "emptyTable": "No data available in table"
 //                    }
 //                } );

 //                $(".se-pre-con").fadeOut("slow");
 //            }
 //        });

 //    	firebase.database().ref('delivery_ongoing_order').orderByChild('reverseDate').on('child_added', function(orderSnapshot){
    	
 //            if(orderSnapshot.val().issued_dr_plant == plant){
 //        		firebase.database().ref('delivery_ongoing_order/'+orderSnapshot.key+'/project_detail').once('value', function(projectSnapshot){
 //        			projectSnapshot.forEach(function(projectChildSnapshot){

 //        				contact_array = []
 //                        dr_no = orderSnapshot.val().dr_no;
 //                        po_no = orderSnapshot.val().po_no;
 //                        item_no = orderSnapshot.val().item_no;
 //                        psi = orderSnapshot.val().psi;

 //                        if(psi != ""){
 //                            psi_ext = " (" + psi + " psi)";
 //                        }else{
 //                            psi_ext = "";
 //                        }

 //                        quantity = Number(orderSnapshot.val().quantity).toLocaleString('en');
 //                        project_name = projectChildSnapshot.val().project_name;
 //                        project_address = projectChildSnapshot.val().project_address;
 //                        date = dateFormat(orderSnapshot.val().date);
 //                        status = orderSnapshot.val().status;

 //                        myTbody += "<tr><td><strong>" + count + "</strong></td>";
 //                        myTbody += "<td><strong>" + dr_no + "</strong></td>";
 //                        myTbody += "<td style='cursor: pointer;'><div class='tooltips' data-original-title='Click for more details about P.O. No. " + po_no + "' data-placement='top' onclick=\"window.location='delivery_po_summary.html?po_no_key=" + orderSnapshot.val().po_no_key + "&plant=" + plant + "'\"><strong>" + po_no + "</strong></div></td>";
 //                        myTbody += "<td><strong>" + item_no + psi_ext + "</strong></td>";
 //                        myTbody += "<td><strong>" + quantity + " pcs</strong></td>";
 //                        myTbody += "<td><strong>" + project_name + "</strong></td>";
 //                        myTbody += "<td><strong>" + project_address + "</strong></td>";
 //                        myTbody += "<td><a data-toggle='collapse' data-target='#contacts"+count+"' style='cursor: default; color: inherit;'>Click to view</a><div id='contacts"+count+"' class='collapse'>";

 //                        firebase.database().ref('delivery_ongoing_order/'+orderSnapshot.key+'/contact').once('value', function(contactSnapshot){
 //                            contactSnapshot.forEach(function(contactChildSnapshot){

 //                                contact_name = contactChildSnapshot.val().contact_name;
 //                                contact_no = contactChildSnapshot.val().contact_no;
 //                                myTbody += "<div class='row' style='margin-bottom: 2px;'><div class='col-md-12'><strong>" + contact_name + "<br> (" + contact_no + ") <br><br></strong></div></div>";

 //                                 	var array_value = {
	// 			                        contact_name: contact_name,
	// 			                        contact_no: contact_no
	// 			                    }

	// 			                    contact_array.push(array_value);
 //                            }); 
 //                        });

                        
 //                        myTbody += "</td>";
 //                        myTbody += "<td><strong>" + date + "</strong></td>";
 //                        myTbody += "<td><span class='label' style='background-color: #388e3c; font-size: 12px;'><strong>" + status + "</strong></span></td></tr>";
 //                        // myTbody += "<td style='color: #388e3c;'><strong>" + status + "</strong></td></tr>";
 //                        // document.getElementById('orderList').innerHTML = myTbody;

 //                        for (var i = 0; i < contact_array.length; i++) {

 //                        	if(i == 0){
	// 	                        contact = contact_array[i].contact_name + " (" + contact_array[i].contact_no + ")";
	// 	                    }else if(i == (contact_array.length - 1)){
	// 	                        contact += " and " + contact_array[i].contact_name + " (" + contact_array[i].contact_no + ")";
	// 	                    }else{
	// 	                        contact += ", " + contact_array[i].contact_name + " (" + contact_array[i].contact_no + ")";
	// 	                    }
 //                        }

 //                        view_detail = "<a href='delivery_po_summary.html?po_no_key=" + orderSnapshot.val().po_no_key + "&plant=" + plant + "'>Click for more details about P.O. No. " + po_no + "</a>";

 //                        table.row.add( [ count, dr_no, po_no, item_no, quantity, project_name, project_address, contact, date, status, view_detail ] ).draw();
                        
 //                        count++;
                    
 //                        $(".se-pre-con").fadeOut("slow");
 //        			});
 //        		});
 //         	}
 //    	});       
 //    }

	// function countItemOngoingDelivery(itemKey, callback){

		
 //        firebase.database().ref('delivery_ongoing_order').orderByChild('item_key').equalTo(itemKey).on('value', 
 //        function(orderSnapshot){

 //            response = orderSnapshot.val();

 //        	callback(response);

 //        });
 //    }



</script>
</head>
<body>
    <div class="se-pre-con"></div>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<form class="form-inline" onsubmit="return submitForm();">
					<div class="row" style="margin-bottom: 5px;">  
                        <div class="col-md-3">
                            <div class="form-group">
                                <label for="start_date">Select Date Range:</label>
                                <input type="text" name="daterange" id="daterange" value="" class="form-control" autocomplete="off">
                            </div>
                        </div>
                        <div class="input-group col-md-5" style="margin: 38px 0px 0px 0px;">
                            <div class="tooltips" data-original-title="Search DR No., P.O. No., Item, Project Name, Address or Contact" data-placement="top">
                                <input type="text" id="search" name="search" class="form-control" placeholder="Search...">
                            </div>
                            <span class="input-group-btn">
                                <button class="btn btn-info" type="submit" name="search_table">
                                    <i class="fa fa-search"></i>
                                </button>
                            </span>
                        </div>
                    </div>	
				</form>
				<div class="table-responsive filterable">
                    <table class="table table-striped table-bordered display responsive" id="myTable">
                        <thead>
                            <tr class="filters" style="background-color: #00a3cc;">
                                <th class="all" style="color: white;">#</th>
                                <th class="all" style="color: white;">DR No.</th>
                                <th class="all" style="color: white;">P.O. No.</th>
                                <th class="all" style="color: white;">Item</th>
                                <th class="all" style="color: white;">Quantity</th>
                                <th class="all" style="color: white;">Project Name</th>
                                <th class="all" style="color: white;">Address</th>
                                <th class="none" style="color: white;">Contact</th>
                                <th class="all" style="color: white;">Date</th>
                                <th class="all" style="color: white;">Status</th>
                                <th class="none" style="color: white;">Details</th>
                            </tr>
                        </thead>
                        <tbody id="orderList">

                        </tbody>
                    </table>
                </div>
				<!-- <div class="table-responsive">
					<table class="table table-bordered">
						<thead>
							<tr>
								<th class="col-md-1">#</th>
                                <th class="col-md-1">P.O. No.</th>
                                <th class="col-md-1">Item</th>
                                <th class="col-md-2">Ordered / Remaining</th>
                                <th class="col-md-2">Project Name</th>
                                <th class="col-md-2">Address</th>
                                <th class="col-md-1">Contact</th>
                                <th class="col-md-1">Date Order</th>
							</tr>
						</thead>
						<tbody id="list_po_no">
						</tbody>
					</table>					
				</div> -->
			</div>
		</div>
	</div>
</body>
</html>